# 笔记：系统分区之分区与格式化

## 磁盘分区
使用分区编辑器（partition editor）在磁盘上划分几个逻辑部分。碟片一旦划分成数个分区（Partition），不同类的目录和文件可以存储进不同的分区。

## 分区的优点
提高文件的查找和读写效率。

## 分区类型
*Linux与Windows等所有系统都适用此规则*

- 主分区：最多只能分4个。

- 这是由硬盘的结构决定，硬盘把自己分成了等大小的扇区，每个扇区都是512字节，其中446个字节用于记录启动信息（MBR主引导记录），剩下的64个字节进行分区表示（硬盘分区表），最后的两个字节"55 AA"是分区有效结束标志。

- 64个字节中每16个字节表示一个分区，所以最多只能表示4个主分区，这个是由硬盘结构决定的。每个主分区都有各自独立的引导块，可以用fdisk设定为启动区。

- 扩展分区：硬盘最多只能有1个扩展分区。可以将一个主分区作为扩展分区，即三个主分区，一个扩展分区，总计4个分区。也就是说主分区加扩展分区最多有4个。扩展分区不能写入任何数据，只能包含逻辑分区。

- 逻辑分区：可以有多个，没有独立的引导块，不能用fdisk设定为启动区。

## 格式化
- 又称逻辑格式化，它是指根据用户选定的文件系统。如FAT16（最大支持2GB容量分区，故不使用），FAT32（单个文件大小不能超过4GB，最大支持16TB大小分区），NTFS（Windows下最先进的文件系统），EXT2、EXT3、EXT4（EXT是Linux下的文件系统，数字越大代表越先进。Centos下默认EXT4）等。

- 在磁盘特定区域写入特定数据，在分区中划出一片用于存放文件分配表、目录表等用于文件管理的磁盘空间。

- 误区解析：格式化的目的并不是清空数据，其根本目的是为了写入文件系统，但是在进行格式化的操作时会先清空原有数据。格式化目的：将硬盘打隔断，根本目的是为了写入文件系统。

### 格式化具体进行的操作：
1. 将一个分区分割成等大小的数据块（Block），每个数据块默认4KB。假设存放10KB的文件，会使用3个数据块，三个数据块不一定是连续的，最后的一数据块中即使没有放满，也不能再存放其他文件。

2. 在分区列表中建立一个二维表格，记录了文件的id号（即文件放在那些数据库中，叫做i节点）、文件修改时间、文件的访问权限。操作文件时先访问此二维表格进行权限匹配。

