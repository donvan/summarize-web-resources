# linux 目录处理命令

_linux 中一切皆文件。目录为目录文件。普通文件用来保存数据，目录文件用来保存文件。_

## 建立目录

_make directories_

- `mkdir [目录名]` 例 `mkdir light`
- `mkdir -p [目录名]` 递归创建，当创建多级目录时需加 例 `mkdir -p imooc/linux/light`

## 切换目录

_change directory_

- `cd [目录]`
- `cd ~` 进入当前用户的家目录
- `cd /` 进入根目录
- `cd -` 进入上次目录
- `cd ..` 进入上一级目录
- `cd .` 进入当前目录

## 路径

- 相对路径：参照当前所在目录，进行查找
- 绝对路径：从根目录开始制定，一级一级递归，进行查找

## 查询所在目录位置

_print working directory_

- `pwd`

## 删除空目录

_remove empty directories_

- `rmdir` [目录名]

## 删除文件或目录

*remove*

_纯字符界面没有回收站。注意自杀指令：`rm -rf` /_

- `rm -rf [文件或目录]`
  - 选项 -r ：删除目录
  - 选项 -f ：强制
- `rm [文件名]` ：提示是否删除
- `rm -r [目录]` ：删除目录需加 -r ，目录中含有子文件，将持续询问是否删除
- `rm -rf [目录]` ：删除目录， 不会询问是否删除而直接进行 `rm -rf /tmp/* ：删除tmp目录下的内容`

## 复制命令

_copy_

- `cp [选项] [原文件或目录] [目标目录]`
  - 选项 -r ：复制目录
  - 选项 -p ：连带文件属性复制
  - 选项 -d ：若原文件是链接文件，则复制链接属性
  - 选项 -a ：相当于 -pdr 全选
- 例子
  - cp abc /tmp/ 若目标目录不加文件名，则为原名复制
  - cp abc /tmp/ana 若目标目录后加入文件名，则为改名复制
  - cp -r japan/ /tmp/ 复制目录
  - cp -a japan/ /tmp/ 完全复制，包括所有属性

## 剪切或改名命令

_move_

- mv [原文件或目录][目标目录] -例子
  - `mv japan/ /tmp/` 剪切
  - `mv abc longls` 当原文件与目标目录，在同一目录下，则为改名命令

## 链接命令

_link_

- 生成链接文件 `ln -s [原文件] [目标文件]`，`-s` 创建软链接
- 硬链接特征
  - 拥有相同的 i 节点和存储 block 块，可以看做是同一个文件。（在格式化时，第一将分区划分为等大小的 block 数据块，该数据块通常为 4KB。第二建立分区表，并为每个文件建立一个相关数据。当用户搜索某个文件时，会先到分区表中查找文件所对应的 block 存储位置，接着到相应位置取出，并返回给用户。）硬链接与原文件拥有相同的 i 节点。因此，与原文件非常相似。当删除原文件或硬链接文件的任何一文件，不影响文件索引操作。可看做，同一个文件的不通进入点。它是同样的存储空间。
  - 可通过 i 节点识别
  - 不能跨分区建立
  - 不能针对目录使用，只有文件才可以创建
  - ln ./source/abc ./target/bcd.hard 创建后，引用计数+1
  - ls -i ./source/abc ./target/bcd.hard 可使用 `ls -i` 来查看文件 i 节点号
  - 不建议创建硬链接文，文件太过隐蔽，除了有 i 节点这样一个标识之外，很难区分它是不是硬链接，硬链接限制较多，不能跨分区，不能针对目录，使用当中容易出现错误使用方法
- 软链接特征
  - 类似于 Windows 快捷方式
  - 软链接拥有自己的 i 节点和 block 块，但是数据块中只保存原文件的文件名和 i 节点号，并没有实际的文件数据。（拥有自己的分区表中索引数据,通过索引找到分区表中文件的目标索引数据，再通过目标索引数据，查找数据）
  - lrwxrwxrwx l 软链接， 软链接文件权限都为 rwxrwxrwx, 虽然权限显示为 777，但实际权限需要看原文件权限
  - 修改任意文件，另一个都改变
  - 删除原文件，软链接不能使用
  - 创建软链接，原文件一定要写绝对路径。否则，软链接会到它所在的同一目录去找原文件

## 其他

- 当前系统时间命令 `date`
- 清屏 `ctrl + L`
- 查看用户信息 `w`
- 查询当前登陆和过去登陆用户信息 `last`
- 查看所有用户最后一次登陆时间 `lastlog`
